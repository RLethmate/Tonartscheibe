<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improvisations-Helfer</title>
    <style>
        /* --- GRUNDLAGEN --- */
        * { box-sizing: border-box; }
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: #e0e0e0;
            overflow: hidden; 
            user-select: none;
            -webkit-user-select: none;
        }

        h1 { margin-bottom: 20px; color: #333; font-size: 1.5rem; text-align: center;}

        .wheel-container {
            position: relative;
            width: 380px; /* Etwas gr√∂√üer f√ºr mehr Platz */
            height: 380px;
        }

        /* --- SCHEIBEN --- */
        .disc {
            position: absolute;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* Startposition */
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* 1. √Ñu√üere Scheibe (Noten) */
        .outer-disc {
            width: 380px;
            height: 380px;
            background-color: #fff;
            z-index: 1;
            border: 1px solid #999;
            transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        /* 2. & 3. Innere Scheibe (Zahlen + Icons) */
        .inner-disc {
            width: 240px; /* Gro√ü genug f√ºr Zahlen am Rand */
            height: 240px;
            background-color: #222; 
            color: #fff;
            z-index: 2;
            border: 2px solid #fff;
        }

        /* --- SEGMENTE --- */
        .segment {
            position: absolute;
            width: 60px; 
            height: 50%; /* Radius */
            top: 0;
            left: 50%; 
            margin-left: -30px; 
            transform-origin: bottom center; 
            pointer-events: none; 
        }

        /* --- ELEMENT-POSITIONIERUNG --- */
        
        /* Wrapper hilft beim "Gegen-Drehen" (Riesenrad-Effekt) */
        .counter-rotator {
            position: absolute;
            width: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        /* Position der NOTEN (Au√üen) */
        .pos-note {
            top: 15px; /* Abstand vom Rand nach innen */
            height: 40px;
        }
        .note-text {
            font-size: 1.6rem;
            font-weight: bold;
            color: #333;
        }

        /* Position der R√ñMISCHEN ZAHLEN (Zone B - Rand innen) */
        .pos-roman {
            top: 10px; /* Nah am Rand der schwarzen Scheibe */
            height: 30px;
        }
        .roman-text {
            font-size: 1.1rem;
            font-weight: bold;
            color: #fff; /* Wei√üer Text auf Schwarz */
        }

        /* Position der ICONS (Zone C - Mitte innen) */
        .pos-icon {
            top: 55px; /* Tiefer drin, damit sie nicht √ºberlappen */
            height: 50px;
        }

        .icon-img {
            max-width: 40px; 
            max-height: 40px;
            width: auto;
            height: auto;
            object-fit: contain; 
            display: block;
            /* Hintergrund explizit transparent setzen (hilft nur, wenn PNG auch transparent ist) */
            background-color: transparent; 
        }

        .emoji-fallback { font-size: 1.8rem; }

        /* --- MARKIERUNG --- */
        .marker {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            width: 0; height: 0; 
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 25px solid #d32f2f;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3));
        }

        /* --- STEUERUNG --- */
        .controls {
            margin-top: 40px;
            display: flex;
            gap: 20px;
        }
        button {
            padding: 15px 30px;
            font-size: 1.2rem;
            cursor: pointer;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 50px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        button:active { transform: scale(0.95); }

    </style>
</head>
<body>

    <h1>Harmonie-Rad</h1>

    <div class="wheel-container">
        <div class="marker"></div>
        <div class="disc outer-disc" id="outerWheel"></div>
        <div class="disc inner-disc" id="innerWheel"></div>
    </div>

    <div class="controls">
        <button onclick="rotate(-1)">‚¨ÖÔ∏è</button>
        <button onclick="rotate(1)">‚û°Ô∏è</button>
    </div>

    <script>
        // --- KONFIGURATION ---
        
        const notes = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "H"];
        
        // HIER WIEDER DEINE BILDER PR√úFEN:
        const functions = [
            { roman: "I",   emoji: "üè†", image: "haus.png" }, 
            null,
            { roman: "II",  emoji: "üåâ", image: "bruecke.png" }, 
            null,
            { roman: "III", emoji: "",   image: "" }, 
            { roman: "IV",  emoji: "‚õ∞Ô∏è", image: "berg_klein.png" }, 
            null,
            { roman: "V",   emoji: "üåã", image: "berg_gross.png" }, 
            null,
            { roman: "VI",  emoji: "üåâ", image: "bruecke.png" }, 
            null,
            { roman: "VII", emoji: "¬∞",  image: "" }  
        ];

        // --- SETUP ---
        const outerWheel = document.getElementById('outerWheel');
        const innerWheel = document.getElementById('innerWheel');
        
        // Liste aller Elemente, die sich "gegen-drehen" m√ºssen
        const counterRotatingElements = [];

        let currentStep = 0; 

        // 1. √Ñu√üere Scheibe (Nur Noten)
        notes.forEach((note, index) => {
            const segment = document.createElement('div');
            segment.className = 'segment';
            segment.style.transform = `rotate(${index * 30}deg)`;
            
            // Container f√ºr Note
            const wrapper = document.createElement('div');
            wrapper.className = 'counter-rotator pos-note'; // Klasse f√ºr Positionierung
            
            const span = document.createElement('span');
            span.className = 'note-text';
            span.innerText = note;
            
            wrapper.appendChild(span);
            segment.appendChild(wrapper);
            outerWheel.appendChild(segment);
            
            counterRotatingElements.push({
                element: wrapper,
                baseAngle: index * 30 
            });
        });

        // 2. Innere Scheibe (Zahlen UND Icons getrennt positioniert)
        functions.forEach((func, index) => {
            if (func) {
                const segment = document.createElement('div');
                segment.className = 'segment';
                segment.style.transform = `rotate(${index * 30}deg)`;

                // A) Die R√∂mische Zahl (Weiter au√üen)
                const romanWrapper = document.createElement('div');
                romanWrapper.className = 'counter-rotator pos-roman';
                romanWrapper.innerHTML = `<span class="roman-text">${func.roman}</span>`;
                
                segment.appendChild(romanWrapper);
                
                // Speichern zum Gegendrehen
                counterRotatingElements.push({
                    element: romanWrapper,
                    baseAngle: index * 30
                });

                // B) Das Icon (Weiter innen) - Nur wenn Bild oder Emoji existiert
                if (func.image || func.emoji) {
                    const iconWrapper = document.createElement('div');
                    iconWrapper.className = 'counter-rotator pos-icon';

                    let iconHtml = '';
                    if (func.image) {
                        iconHtml = `<img src="${func.image}" class="icon-img" alt="${func.roman}">`;
                    } else if (func.emoji) {
                        iconHtml = `<span class="emoji-fallback">${func.emoji}</span>`;
                    }
                    iconWrapper.innerHTML = iconHtml;

                    segment.appendChild(iconWrapper);

                    // Speichern zum Gegendrehen
                    counterRotatingElements.push({
                        element: iconWrapper,
                        baseAngle: index * 30
                    });
                }

                innerWheel.appendChild(segment);
            }
        });

        // --- LOGIK ---

        function rotate(direction) {
            currentStep += direction;
            updateView();
        }

        function updateView() {
            const angle = currentStep * 30;
            
            // √Ñu√üere Scheibe drehen
            // translate muss bleiben, damit Zentrierung stimmt
            outerWheel.style.transform = `translate(-50%, -50%) rotate(${angle}deg)`;
            
            // ALLES was Text oder Bild ist, gegen-drehen
            counterRotatingElements.forEach(item => {
                // Bei Elementen auf der inneren Scheibe (Icons/Zahlen) ist der 
                // Drehwinkel der Scheibe eigentlich 0, aber wir simulieren die Ausrichtung.
                // Da sich aber NUR die √§u√üere Scheibe dreht, m√ºssen wir hier unterscheiden.
                
                // Moment! Dein Wunsch war: Innere Scheibe FEST. √Ñu√üere DREHT.
                // Das bedeutet:
                // 1. Die Noten (Au√üen) drehen sich mit der Scheibe -> m√ºssen gegengedreht werden.
                // 2. Die Zahlen/Icons (Innen) drehen sich NICHT -> sie m√ºssen nur initial einmal gerade stehen.
                
                // Wir pr√ºfen anhand des Eltern-Elements:
                const isOuter = item.element.closest('.outer-disc');
                
                if (isOuter) {
                     // √Ñu√üere Elemente m√ºssen Drehung ausgleichen
                     const counterRotation = -item.baseAngle - angle;
                     item.element.style.transform = `rotate(${counterRotation}deg)`;
                } else {
                    // Innere Elemente stehen immer fest auf ihrem Winkel
                    // Sie m√ºssen nur ihren Basis-Winkel ausgleichen, um gerade zu stehen.
                    item.element.style.transform = `rotate(${-item.baseAngle}deg)`;
                }
            });
        }

        // Initiale Zentrierung
        innerWheel.style.transform = `translate(-50%, -50%)`;
        updateView(); 

    </script>
</body>
</html>